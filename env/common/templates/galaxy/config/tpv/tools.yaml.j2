---

tools:

  # abstract tools for inheritance

  _conda_local:
    abstract: true
    scheduling:
      require:
      - conda
      reject:
      - singularity
      - hpc
      - pulsar
      - offline

  _galaxy_lib:
    abstract: true
    params:
      container_override:
      - type: singularity
        shell: /bin/sh
        identifier: /cvmfs/singularity.galaxyproject.org/all/centos:8.3.2011
    env:
    - name: SINGULARITYENV_PREPEND_PATH
      value: $GALAXY_VIRTUAL_ENV/bin
    - name: SINGULARITYENV_PYTHONPATH
      value: $GALAXY_LIB
    scheduling:
      require:
      - singularity
      reject:
      - hpc

  _galaxy_lib_local:
    inherits: _galaxy_lib
    scheduling:
      reject:
      - pulsar

  _legacy:
    abstract: true
    params:
      container_override:
      - type: singularity
        shell: /bin/bash
        resolve_dependencies: true
        identifier: /cvmfs/main.galaxyproject.org/singularity/usegalaxy.org-legacy-environment--0
    scheduling:
      require:
      - singularity
      reject:
      - hpc
      - offline

  _singularity_resolv_fix:
    abstract: true
    params:
      # this doesn't override dest params
      #singularity_no_mount: tmp
      singularity_run_extra_arguments: --no-mount=tmp
    env:
    - name: SINGULARITY_BIND
      value: /etc/pki:/etc/pki:ro,/etc/ssl:/etc/ssl::ro

  _hpc:
    abstract: true
    #inherits: _default
    scheduling:
      accept:
      - pulsar
      require:
      - hpc

  # test tools

  #echo: {scheduling: {require: [jetstream2]}}

  # non-pulsar tools

  upload1: {inherits: _conda_local}
  __.*__: {inherits: _conda_local}
  param_value_from_file: {inherits: _conda_local}
  pick_value: {inherits: _conda_local}

  # galaxy lib tools in singularity

  CONVERTER_.*: {inherits: _galaxy_lib}
  Interval_Maf_Merged_Fasta2: {inherits: _galaxy_lib}
  MAF_Limit_To_Species1: {inherits: _galaxy_lib}
  MAF_Reverse_Complement_1: {inherits: _galaxy_lib}
  MAF_Thread_For_Species1: {inherits: _galaxy_lib}
  MAF_To_BED1: {inherits: _galaxy_lib}
  MAF_To_Fasta1: {inherits: _galaxy_lib}
  MAF_To_Interval1: {inherits: _galaxy_lib}
  MAF_filter: {inherits: _galaxy_lib}
  gff2bed1: {inherits: _galaxy_lib}
  maf_by_block_number1: {inherits: _galaxy_lib}
  maf_limit_size1: {inherits: _galaxy_lib}

  # galaxy lib tools in singularity, non-pulsar

  toolshed.g2.bx.psu.edu/repos/iuc/compose_text_param/compose_text_param/.*: {inherits: _galaxy_lib_local}

  # as of 23.1, these have no requirement tags

  addValue:
    params:
      container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/perl:5.26.2"}]
  # there are both a framework and a TS version
  toolshed.g2.bx.psu.edu/repos/devteam/add_value/addValue/.*:
    inherits: addValue

  Paste1:
    params:
      # coreutils=8.25,perl=5.22.0.1
      container_override: [{type: singularity, shell: '/bin/bash', identifier: "/cvmfs/singularity.galaxyproject.org/all/mulled-v2-c5660771860859a51697ce13d5d74251dc4c8eb6:254c9751502b0d56aa64890243ee9ebd88e94048-0"}]

  _perl_5_26_2:
    params:
      container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/perl:5.26.2"}]
  Remove beginning1: {inherits: _perl_5_26_2}
  Condense characters1: {inherits: _perl_5_26_2}
  createInterval: {inherits: _perl_5_26_2}
  Cut1: {inherits: _perl_5_26_2}
  ChangeCase: {inherits: _perl_5_26_2}
  hgv_david: {inherits: _perl_5_26_2}
  hgv_linkToGProfile: {inherits: _perl_5_26_2}
  master2pgSnp: {inherits: _perl_5_26_2}

  Extract_features1:
    params:
      container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/bx-python:0.8.9--py38hb90e610_2"}]
  comp1:
    params:
      # python=3.7,coreutils=8.30
      container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/mulled-v2-879928bcdd8adc5b4660a3f6de3703d7c7861de4:6ce96688844d469d84f94fabb34055d8dfa283c7-0"}]

  # real tools

  # NOTE: any tools that increase cores but do not set mem will use the default mem multiplier of cores * 2.89G

  hgv_ldtools:
    # copies ldtools_wrapper.sh without +x so can't be executed
    scheduling:
      reject:
      - pulsar

  toolshed.g2.bx.psu.edu/repos/bgruening/trim_galore/trim_galore/.*:
    cores: 5
    rules:
    - id: trim_galore_small_input_rule
      if: input_size < 0.02
      cores: 1
    - id: trim_galore_medium_input_rule
      if: 0.02 <= input_size < 0.2
      cores: 3

  toolshed.g2.bx.psu.edu/repos/bgruening/uniprot_rest_interface/uniprot/0.[234]:
    inherits: _singularity_resolv_fix
    # copies uniprot.py without +x so can't be executed
    scheduling:
      reject:
      - pulsar

  toolshed.g2.bx.psu.edu/repos/devteam/fastqc/fastqc/.*:
    cores: 8
    rules:
    - id: fastqc_tiny_input_rule
      if: input_size < 0.001
      cores: 1
    - id: fastqc_small_input_rule
      if: 0.001 <= input_size < 0.1
      cores: 2
    - id: fastqc_medium_input_rule
      if: 1 <= input_size < 2
      cores: 4

  toolshed.g2.bx.psu.edu/repos/devteam/flanking_features/flanking_features_1/.*:
    # was 16 in the job router but let's try this
    mem: 8

  toolshed.g2.bx.psu.edu/repos/devteam/varscan_version_2/varscan/.*:
    # was 16 in the job router but let's try this
    mem: 8

  toolshed.g2.bx.psu.edu/repos/iuc/collection_column_join/collection_column_join/.*:
    # was 16 in the job router but let's try this
    mem: 8

  toolshed.g2.bx.psu.edu/repos/iuc/ebi_metagenomics_run_downloader/ebi_metagenomics_run_downloader/0.1.0:
    inherits: _singularity_resolv_fix
    # copies download_ebi_metagenomics_run_data without +x so can't be executed
    scheduling:
      reject:
      - pulsar

  toolshed.g2.bx.psu.edu/repos/iuc/ggplot2_heatmap2/ggplot2_heatmap2/.*:
    # shared DB uses 24, AU uses 7.6, we had configured 16, stick with 16
    mem: 16

  toolshed.g2.bx.psu.edu/repos/iuc/variant_analyzer/read2mut/.*:
    # was 16 in the job router but let's try this
    mem: 8

  toolshed.g2.bx.psu.edu/repos/iuc/vsearch/vsearch_[^/]*/2\..*:
    # uses cpu instructions not present on roundup
    scheduling:
      reject:
      - roundup

  toolshed.g2.bx.psu.edu/repos/nml/metaspades/metaspades/.*:
    # shared DB has 10 cores and 250 GB(!)
    cores: 16
    mem: 60
    rules:
    - id: metaspades_small_input_rule
      if: input_size < 0.05
      cores: 2
      mem: 7.6
    - id: metaspades_medium_input_rule
      if: 0.05 <= input_size < 1
      cores: 8
      mem: 28
    - id: metaspades_fail_rule
      if: input_size >= 60
      fail: Too much data, please don't use Spades for this

  # TODO: sort stuff below here

  toolshed.g2.bx.psu.edu/repos/galaxy-australia/alphafold2/alphafold/.*:
    gpus: 1
    cores: 12
    #mem: uses --mem-per-cpu=4G
    params:
      require_container: true
      container_override:
        - type: singularity
          shell: /bin/bash
          resolve_dependencies: false
          identifier: /scratch4/mschatz1/ndc/alphafold_sandbox
    env:
    - name: SINGULARITYENV_ALPHAFOLD_AA_LENGTH_MIN
      value: "16"
    - name: SINGULARITYENV_ALPHAFOLD_AA_LENGTH_MAX
      value: "3000"
    - name: SINGULARITYENV_ALPHAFOLD_DB
      value: /cvmfs/data.galaxyproject.org/byhand/alphafold
    rules:
    - if: |
        user and 'AlphaFold' in [role.name for role in user.all_roles() if not role.deleted]
      scheduling:
        require:
        - hpc
        - rockfish-gpu
    - if: |
        not user or not any([
          role for role in user.all_roles() if (
            role.name in ['AlphaFold'] and not role.deleted
        )])
      fail: |
        This tool is currently being beta-tested on GPUs and your account has not been given access.

  # https://github.com/bioconda/bioconda-recipes/pull/41091
  #   mulled-build --singularity --test "QT_QPA_PLATFORM='offscreen' Bandage --version" build-and-test bandage_ng=2022.09
  toolshed.g2.bx.psu.edu/repos/iuc/bandage/bandage_image/2022.09.*:
    mem: 16
    params:
      container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/main.galaxyproject.org/singularity/bandage_ng:2022.09--0"}]
    env:
    - name: SINGULARITYENV_QT_QPA_PLATFORM
      value: offscreen

  toolshed.g2.bx.psu.edu/repos/iuc/bandage/bandage_info/2022.09.*:
    inherits: toolshed.g2.bx.psu.edu/repos/iuc/bandage/bandage_image/2022.09.*

  toolshed.g2.bx.psu.edu/repos/iuc/meryl/meryl/.*:
    # 24 cores in the shared db
    # 130 in the shared DB, this prevents us from wasting most of an m3.2xl.
    mem: 120
    env:
    # suppress 'tar: read-db.meryl: file changed as we read it' warning and non-zero exit code
    - name: SINGULARITY_BIND
      value: /jetstream2/scratch/main/nate/wraptar:/usr/local/sbin/tar:ro
    rules:
    - id: meryl_small_input_rule
      if: input_size < 0.001
      cores: 2
      mem: 7.6
    - id: meryl_medium_input_rule
      if: 0.001 <= input_size < 5
      cores: 16
      mem: 60
    scheduling:
      require:
      - jetstream2

  toolshed.g2.bx.psu.edu/repos/chemteam/gmx_sim/gmx_sim/.*:
    gpus: 0.2
    cores: 4
    mem: 14
    scheduling:
      require:
      - gpu
      - pulsar

  toolshed.g2.bx.psu.edu/repos/iuc/trinity/trinity/.*:
    cores: 24
    # TODO: shared db uses 512, AU uses 961 but caps inputs at 30
    mem: 244
    scheduling:
      prefer:
      - expanse
    rules:
      - id: trinity_tiny_input_rule
        if: input_size < 0.1
        cores: 1
        mem: 3.8
      - id: trinity_small_input_rule
        if: 0.1 <= input_size < 1
        cores: 8
        mem: 62
      - id: trinity_medium_input_rule
        if: 1 <= input_size < 4
        cores: 16
        mem: 124
      - id: trinity_large_input_rule
        if: 4 <= input_size < 8
        cores: 20
        mem: 186
      - id: trinity_fail_rule
        if: input_size >= 80
        fail: |
          Too much data, we cannot support such large Trinity assemblies with our
          backend. Please use another server for your job.

  toolshed.g2.bx.psu.edu/repos/bgruening/flye/flye/.*:
    cores: 2
    rules:
    - if: input_size < 0.5
      cores: 4
      mem: 12
      scheduling:
        accept:
        - general
        reject:
        - hpc
    - if: 0.5 <= input_size < 10
      cores: 30
      mem: 80
      scheduling:
        accept:
        - hpc
        - jetstream2
        reject:
        - roundup
    - if: input_size >= 10
      # from AU
      #cores: 120
      #mem: 1922
      cores: 56
      mem: 94
      scheduling:
        accept:
        - hpc
        reject:
        - general

  toolshed.g2.bx.psu.edu/repos/iuc/busco/busco/.*:
    # busco fails miserably on Stampede2 (all partitions) with a variety of multiprocessing-related errors
    cores: 20
    mem: 60
    env:
    # prevent premature removal of untarred busco DBs
    - name: SINGULARITYENV_TAR_OPTIONS
      value: -m
    scheduling:
      reject:
      - stampede2

  toolshed.g2.bx.psu.edu/repos/devteam/bowtie2/bowtie2/.*:
    cores: 8
    mem: 28
    rules:
    - id: bowtie2_small_input_rule
      if: input_size < 0.1
      cores: 2
      mem: 7.6
    - id: bowtie2_medium_input_rule
      if: 0.1 <= input_size < 2
      cores: 4
      mem: 16

  toolshed.g2.bx.psu.edu/repos/devteam/bwa/bwa/.*:
    cores: 8
    mem: 28
    rules:
    - id: bwa_small_input_rule
      if: input_size < 0.25
      cores: 2
      mem: 7.6
    - id: bwa_medium_input_rule
      if: 0.25 <= input_size < 1
      cores: 4
      mem: 16

  toolshed.g2.bx.psu.edu/repos/devteam/bwa/bwa_mem/.*:
    cores: 32
    mem: 120
    rules:
    - id: bwa_mem_small_input_rule
      if: input_size < 0.25
      cores: 2
      mem: 7.6
    - id: bwa_mem_medium_input_rule
      if: 0.25 <= input_size < 1
      cores: 4
      mem: 15.3
    - id: bwa_mem_medium2_input_rule
      if: 1 <= input_size < 20
      cores: 8
      mem: 30.7

  toolshed.g2.bx.psu.edu/repos/iuc/bwa_mem2/bwa_mem2/.*:
    cores: 32
    mem: 120
    rules:
    - id: bwa_mem2_small_input_rule
      if: input_size < 0.25
      cores: 2
      mem: 7.6
    - id: bwa_mem2_medium_input_rule
      if: 0.25 <= input_size < 16
      cores: 8
      mem: 28
    - id: bwa_mem2_large_input_rule
      if: 16 <= input_size < 32
      cores: 16
      mem: 58

  toolshed.g2.bx.psu.edu/repos/iuc/hisat2/hisat2/.*:
    cores: 32
    mem: 120
    rules:
    - id: hisat2_small_input_rule
      if: input_size < 0.5
      cores: 2
      mem: 7.6
    - id: hisat2_medium_input_rule
      if: 0.5 <= input_size < 15
      cores: 8
      mem: 30
    - id: hisat2_large_input_rule
      if: 15 <= input_size < 30
      cores: 16
      mem: 58

  toolshed.g2.bx.psu.edu/repos/bgruening/hifiasm/hifiasm/.*:
    cores: 64
    mem: 496
    context:
      time: 48:00:00
    rules:
    - id: hifiasm_small_input_rule
      if: input_size < 1
      cores: 2
      mem: 7.6
    - id: hifiasm_medium_input_rule
      if: 1 <= input_size < 16
      cores: 8
      mem: 28
    - id: hifiasm_large_input_rule
      if: 16 <= input_size < 32
      cores: 16
      mem: 60
    - id: hifiasm_xlarge_input_rule
      if: 32 <= input_size < 64
      cores: 32
      mem: 120
    - id: hifiasm_xxlarge_input_rule
      if: 64 <= input_size < 128
      cores: 64
      mem: 244


  toolshed.g2.bx.psu.edu/repos/devteam/kraken/kraken/.*:
    cores: 20
    mem: 20
    scheduling:
      require:
      - cvmfs

  # TODO: rule to set mem based on database size, see job router
  toolshed.g2.bx.psu.edu/repos/iuc/kraken2/kraken2/.*:
    cores: 40
    mem: 140
    scheduling:
      require:
      - cvmfs

  toolshed.g2.bx.psu.edu/repos/iuc/abyss/abyss-pe/.*:
    cores: 90
    mem: 120
    scheduling:
    rules:
    - id: abyss-pe_small_input_rule
      if: input_size < 0.002
      cores: 2
      mem: 8
    - id: abyss-pe_medium_input_rule
      if: 0.002 <= input_size < 5
      cores: 32
      mem: 94

    # TODO: reject over a certain input size, what is that input size?

  toolshed.g2.bx.psu.edu/repos/nml/spades/spades/.*:
    cores: 60
    mem: 254
    rules:
    - id: spades_small_input_rule
      if: input_size < 0.005
      cores: 2
      mem: 7.6
    - id: spades_medium_input_rule
      if: 0.005 <= input_size < 2
      cores: 8
      mem: 28
    - id: spades_fail_rule
      if: input_size >= 25
      fail: "Too much data for this public service, please input fewer reads. Example method: SeqTk subsample"

  toolshed.g2.bx.psu.edu/repos/iuc/unicycler/unicycler/.*:
    cores: 24
    mem: 80
    rules:
    - id: unicycler_small_input_rule
      if: input_size < 0.05
      cores: 1
      mem: 3.8
    - id: unicycler_medium_input_rule
      if: 0.05 <= input_size < 2
      cores: 8
      mem: 28

  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastn_wrapper/.*:
    cores: 4
    mem: 16
    rules:
    - id: ncbi_blastn_wrapper_db_rule
      if: |
        helpers.job_args_match(job, app, {'db_opts': {'db_opts_selector': 'db'}})
      cores: 24
      mem: 80
  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastp_wrapper/.*:
    inherits: toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastn_wrapper/.*
  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastx_wrapper/.*:
    cores: 24
    mem: 80
    #scheduling:
    #  require:
    #  # FIXME: only if selected
    #  - cvmfs
  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_rpsblast_wrapper/.*:
    inherits: toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastx_wrapper/.*
  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_tblastn_wrapper/.*:
    inherits: toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastn_wrapper/.*
  toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_tblastx_wrapper/.*:
    inherits: toolshed.g2.bx.psu.edu/repos/devteam/ncbi_blast_plus/ncbi_blastx_wrapper/.*

  toolshed.g2.bx.psu.edu/repos/bgruening/bionano_scaffold/bionano_scaffold/.*:
    cores: 24
    mem: 250

  toolshed.g2.bx.psu.edu/repos/bgruening/gfastats/gfastats/.*:
    cores: 4
    mem: 16

  toolshed.g2.bx.psu.edu/repos/lparsons/htseq_count/htseq_count/.*:
    rules:
    - id: htseq_count_small_input_rule
      if: input_size < 0.2
      mem: 3.8
    - id: htseq_count_medium_input_rule
      if: 0.2 <= input_size < 10
      mem: 20

  verkko:
    cores: 32
    mem: 120

  # legacy conda-in-singularity tools

  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/GenotypeSTR/2.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/Profilegenerator/2.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/combineproballelecom/2.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/fetchflank/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/heteroprob/2.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/microsatcompat/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/microsatellite/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/microsatpurity/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/readdepth2seqdepth/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/space2underscore_readname/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/bowtie2/bowtie2/0\.[234]: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/bowtie2/bowtie2/2\.2\.6.*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/bwa/bwa(_mem)?/0\.1: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/bwa/bwa(_mem)?/0\.4\.2: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/bwa/bwa(_mem)?/0\.7\.12\.1: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/fastqc/fastqc/0.[56].*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/fastqc/fastqc/0.71: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/microsats_alignment_level/microsats_align1/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/short_reads_trim_seq/trim_reads/1.0.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/devteam/varscan_version_2/varscan/0.1: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/galaxyp/bed_to_protein_map/bed_to_protein_map/0.1.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/galaxyp/gffcompare_to_bed/gffcompare_to_bed/0.1.0: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/collection_column_join/collection_column_join/0.0.1: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/hisat2/hisat2/1\..*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/hisat2/hisat2/2.0.3: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/variant_analyzer/read2mut/1\..*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/vegan_[^/]*/vegan_[^/]*/0\.0\..*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/iuc/vsearch/vsearch_[^/]*/1\..*: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/lecorguille/anova/abims_anova/1.2.1: {inherits: _legacy}
  toolshed.g2.bx.psu.edu/repos/nick/duplex/.*/0.[35]: {inherits: _legacy}

  # legacy singularity resolv.conf fix tools

  toolshed.g2.bx.psu.edu/repos/bgruening/get_online_data/get_pdb/0.1.0: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/bgruening/get_pdb/get_pdb/0.1.0: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/ebi-gxa/retrieve_scxa/retrieve_scxa/v0.0.2\+galaxy2: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/galaxyp/translate_bed/translate_bed/0.1.0: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/ebi_search_rest_results/ebi_search_rest_results/0.1.1: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/gprofiler_[^/]*/gprofiler_[^/]*/0.1.7\+galaxy11: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/medaka_consensus/medaka_consensus/1.0.3\+galaxy2: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/ncbi_acc_download/ncbi_acc_download/0.2.[57]: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/snpeff/snpEff_get_chr_names/4.3\+T.galaxy2: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/sra_tools/[^/]*_dump/2\.9\..*: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/sra_tools/[^/]*_dump/2\.10\..*: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/sra_tools/[^/]*_dump/2\.11\.0\+galaxy0: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/tbvcfreport/tbvcfreport/0\.1\..*: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/iuc/trinotate/trinotate/3\.[12]\.1: {inherits: _singularity_resolv_fix}
  toolshed.g2.bx.psu.edu/repos/galaxyp/unipept/unipept/4.3.0: {inherits: _singularity_resolv_fix}

  # legacy container override tools

  _galaxy_sequence_utils_1_0_0:
    abstract: true
    params:
      container_override:
      - type: singularity
        shell: /bin/sh
        identifier: /cvmfs/singularity.galaxyproject.org/all/galaxy_sequence_utils:1.0.0--py27_0
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_trimmer/fastq_trimmer/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_trimmer_by_quality/fastq_quality_trimmer/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_combiner/fastq_combiner/1.0.1: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_filter/fastq_filter/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_groomer/fastq_groomer/1.0.4: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_manipulation/fastq_manipulation/1.0.1: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_masker_by_quality/fastq_masker_by_quality/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_paired_end_splitter/fastq_paired_end_splitter/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_paired_end_joiner/fastq_paired_end_joiner/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}
  toolshed.g2.bx.psu.edu/repos/devteam/fastq_stats/fastq_stats/1.0.0: {inherits: _galaxy_sequence_utils_1_0_0}

  _bx_python_0_7_4_py27:
    abstract: true
    params:
      container_override:
      - type: singularity
        shell: /bin/bash
        identifier: /cvmfs/singularity.galaxyproject.org/all/bx-python:0.7.4--np112py27_0
  toolshed.g2.bx.psu.edu/repos/arkarachai-fungtammasan/str_fm/PEsortedSAM2readprofile/1\..*: {inherits: _bx_python_0_7_4_py27}

  _bedtools_2_24_0:
    abstract: true
    # TODO: libz and libstdc++ are missing from this container, see https://github.com/galaxyproject/usegalaxy-playbook/pull/375
    inherits: _legacy
    #params:
    #  container_override:
    #  - type: singularity
    #    shell: /bin/bash
    #    identifier: /cvmfs/singularity.galaxyproject.org/all/bedtools:2.24.0
  # the requirement tag on these tools is for '2.24'
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_makewindowsbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_maskfastabed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_overlapbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_genomecoveragebed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_flankbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_expandbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_randombed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_slopbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bedtobam/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bedpetobam/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_nucbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multicovtbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_fisher/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_tagbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_map/2.24.1: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bed12tobed6/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_clusterbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_multiintersectbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_reldistbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_windowbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_links/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_mergebed/2.24.1: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_intersectbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_complementbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_shufflebed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_getfastabed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtobed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_jaccard/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_groupbybed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_closestbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_spacingbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_subtractbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_sortbed/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_coveragebed/2.24.1: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_annotatebed/2.24.1: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_unionbedgraph/2.24.0: {inherits: _bedtools_2_24_0}
  toolshed.g2.bx.psu.edu/repos/iuc/bedtools/bedtools_bamtofastq/2.24.0: {inherits: _bedtools_2_24_0}

  # cutadapt=1.8,perl
  _mulled_a1b1d4eb09345e8d7e95b30a377ef8c09bbdb4c6_ae68c25c9c45d8f92cef8ae9564f56b2db413fa8:
    abstract: true
    params:
      container_override:
      - type: singularity
        shell: /bin/sh
        identifier: /cvmfs/singularity.galaxyproject.org/all/mulled-v2-a1b1d4eb09345e8d7e95b30a377ef8c09bbdb4c6:ae68c25c9c45d8f92cef8ae9564f56b2db413fa8-0
  # missing dep on perl
  # the two oldest versions are pulsar incompatible (attempting to fetch tool files fails for reasons I have not explored)
  toolshed.g2.bx.psu.edu/repos/bgruening/trim_galore/trim_galore/0.4.0:
    inherits: _mulled_a1b1d4eb09345e8d7e95b30a377ef8c09bbdb4c6_ae68c25c9c45d8f92cef8ae9564f56b2db413fa8
    scheduling: {reject: [pulsar]}
  toolshed.g2.bx.psu.edu/repos/bgruening/trim_galore/trim_galore/0.4.1:
    inherits: _mulled_a1b1d4eb09345e8d7e95b30a377ef8c09bbdb4c6_ae68c25c9c45d8f92cef8ae9564f56b2db413fa8
    scheduling: {reject: [pulsar]}
  toolshed.g2.bx.psu.edu/repos/bgruening/trim_galore/trim_galore/0.4.2: {inherits: _mulled_a1b1d4eb09345e8d7e95b30a377ef8c09bbdb4c6_ae68c25c9c45d8f92cef8ae9564f56b2db413fa8}
